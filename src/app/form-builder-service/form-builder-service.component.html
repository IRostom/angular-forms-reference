<div class="p-8">
  <h1 class="mb-4">Form Builder Service</h1>

  <form
    [formGroup]="profile"
    class="flex flex-col"
    (ngSubmit)="onNestedFormSubmit()"
  >
    <h2 class="my-4">Nested Form using form builder</h2>
    <mat-form-field>
      <mat-label>First Name</mat-label>
      <input matInput placeholder="john" formControlName="firstName" />
    </mat-form-field>
    <mat-form-field>
      <mat-label>Last Name</mat-label>
      <input matInput placeholder="doe" formControlName="lastName" />
    </mat-form-field>

    <div formGroupName="address" class="flex gap-x-4">
      <mat-form-field class="flex-1">
        <mat-label>Street</mat-label>
        <input matInput placeholder="street" formControlName="street" />
      </mat-form-field>
      <mat-form-field class="flex-1">
        <mat-label>City</mat-label>
        <input matInput placeholder="city" formControlName="city" />
      </mat-form-field>
    </div>

    <mat-divider></mat-divider>

    <h2 class="my-4">Form Array using form builder</h2>

    <div formArrayName="aliases" class="flex flex-col gap-y-4">
      <h3>Aliases</h3>
      <div
        *ngFor="let alias of aliases.controls; let i = index"
        class="flex flex-col gap-y-4"
      >
        <div class="flex gap-x-4">
          <mat-form-field class="flex-1">
            <!-- <mat-label>Street</mat-label> -->
            <input matInput placeholder="alias" [formControlName]="i" />
          </mat-form-field>

          <button
            *ngIf="i > 0"
            type="button"
            (click)="removeAlias(i)"
            mat-icon-button
          >
            <mat-icon>cancel</mat-icon>
          </button>
        </div>
      </div>
      <button
        mat-stroked-button
        type="button"
        (click)="addAlias()"
        class="mb-4"
      >
        <mat-icon> add_circle </mat-icon>
        Add Alias
      </button>
    </div>

    <mat-divider></mat-divider>

    <div class="flex gap-x-4 mt-4">
      <button
        type="button"
        mat-stroked-button
        class="mb-4 flex-1"
        (click)="onNestedFormPatch()"
      >
        patch Value
      </button>
      <button
        type="button"
        mat-stroked-button
        class="mb-4 flex-1"
        (click)="onNestedFormSet()"
      >
        set value
      </button>
      <button
        type="button"
        mat-stroked-button
        class="mb-4 flex-1"
        color="warn"
        (click)="onNestedFormReset()"
      >
        Reset
      </button>
    </div>
    <button mat-raised-button class="mb-4" color="primary">Submit</button>
  </form>

  <h3 class="mb-4">form group value</h3>
  <p class="mb-4">{{ profile.value | json }}</p>

  <h3>form group valueChanges observable</h3>
  <p>
    {{ profile.valueChanges | async | json }}
  </p>
</div>
